import { marked } from 'marked';

export async function copyMarkdownToClipboard(markdown: string): Promise<void> {
  try {
    // ✅ Await ensures htmlContent is always a string
    const htmlContent: string = await marked.parse(markdown);

    // Create clipboard blobs
    const htmlBlob = new Blob([htmlContent], { type: 'text/html' });
    const textBlob = new Blob([markdown], { type: 'text/plain' });

    const clipboardItem = new ClipboardItem({
      'text/html': htmlBlob,
      'text/plain': textBlob
    });

    await navigator.clipboard.write([clipboardItem]);
    console.log('✅ Markdown copied as rich text!');
  } catch (error) {
    console.error('❌ Failed to copy Markdown:', error);
  }
}
